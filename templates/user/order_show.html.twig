{% extends 'base.html.twig' %}
{% block title %}Order #{{ order.id }}{% endblock %}
{% block body %}
<h1>Order #{{ order.id }}</h1>
<p><strong>Date:</strong> {{ order.orderDate|date('F j, Y, g:i a') }}</p>
<p><strong>Status:</strong>
    {% if order.status == 'pending' %}
        <span class="badge bg-warning text-dark">Pending</span>
    {% elseif order.status == 'confirmed' %}
        <span class="badge bg-info">Confirmed</span>
    {% elseif order.status == 'shipped' %}
        <span class="badge bg-primary">Shipped</span>
    {% elseif order.status == 'delivered' %}
        <span class="badge bg-success">Delivered</span>
    {% elseif order.status == 'cancelled' %}
        <span class="badge bg-danger">Cancelled</span>
    {% else %}
        <span class="badge bg-secondary">{{ order.status|capitalize }}</span>
    {% endif %}
</p>
<h3>Items</h3>
<table class="table">
    <thead>
        <tr><th>Book</th><th>Price</th><th>Quantity</th><th>Subtotal</th></tr>
    </thead>
    <tbody>
        {% for item in order.orderItems %}
            <tr>
                <td>{{ item.book.title }}</td>
                <td>${{ item.price }}</td>
                <td>{{ item.quantity }}</td>
                <td>${{ item.subtotal|number_format(2) }}</td>
            </tr>
        {% endfor %}
    </tbody>
    <tfoot>
        <tr><td colspan="3"><strong>Total:</strong></td><td><strong>${{ order.totalAmount }}</strong></td></tr>
    </tfoot>
</table>
<a href="{{ path('user_orders') }}" class="btn btn-secondary">Back to Orders</a>
{% endblock %}

